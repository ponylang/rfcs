- Feature Name: io
- Start Date: 2016-07-09
- RFC PR: (leave this empty)
- Pony Issue: (leave this empty)

# Summary

This RFC proposes the addition of the io package to the standard library. This package will contain interfaces to address the common actions of reading and writing data. The ReadBuffer and WriteBuffer classes will also be moved from the net package into the new io package so that they are more easily discovered.

# Motivation

Most applications need to process some input and produce some output based on that input. Therefore, these operations should be raised above application specific packages so that they can be used in a generalized way.

# Detailed design

- The io package will contain the following interfaces:
```pony
interface Readable
  """
  Returns up to len bytes from the input.
  """
  fun ref read(len: USize): Array[U8] iso^

interface Writable
  """
  Writes data to the output and returns false if the data was not written properly.
  """
  fun ref write(data: ByteSeq): Bool
  
  fun ref writev(data: ByteSeqIter box): Bool =>
    for bs in data.values() do
      if not write(bs) then
        return false
      end
    end
```

- The net/ReadBuffer and net/WriteBuffer classes will be moved to the io package.

- The following interfaces will be added to the encode package:
```pony
interface Decoder
  """
  Reads encoded data from the Reader and returns the decoded bytes.
  """
  fun decode(r: Reader): Array[U8] iso^

interface Encoder
  """
  Writes the encoded data to any Writer.
  """
  fun encode(w: Writer, data: ByteSeq): Bool
```

- encode/Base64 will be modified to implement these interfaces.

# How We Teach This

The seperation of any general concern of input/output operations will clarify the use of classes such as the ReadBuffer and Writebuffer.

# Drawbacks

The relocation of the net/ReadBuffer and net/WriteBuffer would break existing code.

# Alternatives

Not to do this.

# Unresolved questions

None.
